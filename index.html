<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯</title>
  <link rel="stylesheet" href="style.css">

  <!-- âœ… Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø§Ù„Ù…Ø¶Ù…ÙˆÙ†Ø© Ù…Ù† EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
  <div>
    <form id="verifyForm" class="card">
      <h2>Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ</h2>
      <input type="email" id="email" placeholder="example@email.com" required>
      <br>
      <button type="submit">Ø£Ø±Ø³Ù„ Ø§Ù„Ø±Ù…Ø²</button>
    </form>

    <form id="checkForm" class="card">
      <h2>Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚</h2>
      <input type="text" id="code" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ù‡Ù†Ø§" required>
      <br>
      <button type="submit">ØªØ­Ù‚Ù‚</button>
    </form>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // ğŸ› ï¸ ØºÙŠÙ‘Ø± Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¨Ù…ÙØªØ§Ø­Ùƒ Ù…Ù† EmailJS
      emailjs.init("X6Jqjy6CmWHmL8VTr");

      document.getElementById('verifyForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const code = Math.floor(100000 + Math.random() * 900000);
        localStorage.setItem("verificationCode", code);

        // Ø£Ø±Ø³Ù„ Ø§Ù„Ø±Ù…Ø² Ø¹Ø¨Ø± EmailJS
        emailjs.send("service_j7ko65b", "template_q8r1wqg", {
          to_email: email,
          message: `Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ùˆ: ${code}`
        }).then(() => {
          alert("ğŸ“§ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ!");
        }, (err) => {
          alert("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: " + JSON.stringify(err));
        });
      });

      document.getElementById('checkForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const enteredCode = document.getElementById('code').value;
        const realCode = localStorage.getItem("verificationCode");

        if (enteredCode === realCode) {
          alert("âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­!");
          window.location.href = "https://achrafmeh.github.io/games/";
        } else {
          alert("âŒ Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­!");
        }
      });
    });
  </script>
</body>
</html>
